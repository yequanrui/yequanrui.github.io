<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4-15 输出分析 | 深入浅出Webpack</title>
    <meta name="description" content="webpack使用学习(吴浩麟版)">
    <link rel="icon" href="/webpackLearn/favicon.ico">
  <link rel="manifest" href="/webpackLearn/manifest.json">
    
    <link rel="preload" href="/webpackLearn/assets/css/styles.77d280ee.css" as="style"><link rel="preload" href="/webpackLearn/assets/js/app.77d280ee.js" as="script"><link rel="preload" href="/webpackLearn/assets/js/1.f37f7214.js" as="script"><link rel="prefetch" href="/webpackLearn/assets/js/10.15a163ee.js"><link rel="prefetch" href="/webpackLearn/assets/js/11.d8cde28c.js"><link rel="prefetch" href="/webpackLearn/assets/js/12.6e485d95.js"><link rel="prefetch" href="/webpackLearn/assets/js/13.8167464c.js"><link rel="prefetch" href="/webpackLearn/assets/js/14.7e75c412.js"><link rel="prefetch" href="/webpackLearn/assets/js/15.593f55f2.js"><link rel="prefetch" href="/webpackLearn/assets/js/16.31248cfb.js"><link rel="prefetch" href="/webpackLearn/assets/js/17.c428f9be.js"><link rel="prefetch" href="/webpackLearn/assets/js/18.1a442e25.js"><link rel="prefetch" href="/webpackLearn/assets/js/19.d2aaef13.js"><link rel="prefetch" href="/webpackLearn/assets/js/2.d7cdf3d2.js"><link rel="prefetch" href="/webpackLearn/assets/js/20.d7645fb0.js"><link rel="prefetch" href="/webpackLearn/assets/js/21.d80e0286.js"><link rel="prefetch" href="/webpackLearn/assets/js/22.b41f3cbc.js"><link rel="prefetch" href="/webpackLearn/assets/js/23.f8779f82.js"><link rel="prefetch" href="/webpackLearn/assets/js/24.958d3c85.js"><link rel="prefetch" href="/webpackLearn/assets/js/25.2e076f51.js"><link rel="prefetch" href="/webpackLearn/assets/js/26.eff2c3e5.js"><link rel="prefetch" href="/webpackLearn/assets/js/27.40064e0e.js"><link rel="prefetch" href="/webpackLearn/assets/js/28.9ad06b95.js"><link rel="prefetch" href="/webpackLearn/assets/js/29.3a0865a0.js"><link rel="prefetch" href="/webpackLearn/assets/js/3.128b6292.js"><link rel="prefetch" href="/webpackLearn/assets/js/30.25c4f77e.js"><link rel="prefetch" href="/webpackLearn/assets/js/31.80207808.js"><link rel="prefetch" href="/webpackLearn/assets/js/32.20b8aa68.js"><link rel="prefetch" href="/webpackLearn/assets/js/33.414db07e.js"><link rel="prefetch" href="/webpackLearn/assets/js/34.3c015b40.js"><link rel="prefetch" href="/webpackLearn/assets/js/35.cfff3ee7.js"><link rel="prefetch" href="/webpackLearn/assets/js/36.5693324e.js"><link rel="prefetch" href="/webpackLearn/assets/js/37.11302d4c.js"><link rel="prefetch" href="/webpackLearn/assets/js/38.5f09cd6d.js"><link rel="prefetch" href="/webpackLearn/assets/js/39.b8a318d2.js"><link rel="prefetch" href="/webpackLearn/assets/js/4.7fbde3f9.js"><link rel="prefetch" href="/webpackLearn/assets/js/40.010eca0d.js"><link rel="prefetch" href="/webpackLearn/assets/js/41.ed550296.js"><link rel="prefetch" href="/webpackLearn/assets/js/42.bf111eba.js"><link rel="prefetch" href="/webpackLearn/assets/js/43.4178a489.js"><link rel="prefetch" href="/webpackLearn/assets/js/44.f9b7d3d8.js"><link rel="prefetch" href="/webpackLearn/assets/js/45.4aa3e07a.js"><link rel="prefetch" href="/webpackLearn/assets/js/46.766fddaf.js"><link rel="prefetch" href="/webpackLearn/assets/js/47.7a16de60.js"><link rel="prefetch" href="/webpackLearn/assets/js/48.ec0b2eb5.js"><link rel="prefetch" href="/webpackLearn/assets/js/49.9ba3c919.js"><link rel="prefetch" href="/webpackLearn/assets/js/5.7aab97c6.js"><link rel="prefetch" href="/webpackLearn/assets/js/50.fe7bdfef.js"><link rel="prefetch" href="/webpackLearn/assets/js/51.b5d4459d.js"><link rel="prefetch" href="/webpackLearn/assets/js/52.aa5814ff.js"><link rel="prefetch" href="/webpackLearn/assets/js/53.8ad00778.js"><link rel="prefetch" href="/webpackLearn/assets/js/54.92f9cbd1.js"><link rel="prefetch" href="/webpackLearn/assets/js/55.d04ea61a.js"><link rel="prefetch" href="/webpackLearn/assets/js/56.4b17dc92.js"><link rel="prefetch" href="/webpackLearn/assets/js/57.82800a68.js"><link rel="prefetch" href="/webpackLearn/assets/js/58.b4482327.js"><link rel="prefetch" href="/webpackLearn/assets/js/59.40bf3560.js"><link rel="prefetch" href="/webpackLearn/assets/js/6.e891bd55.js"><link rel="prefetch" href="/webpackLearn/assets/js/60.3a147a38.js"><link rel="prefetch" href="/webpackLearn/assets/js/61.9fab59f3.js"><link rel="prefetch" href="/webpackLearn/assets/js/62.7aacd083.js"><link rel="prefetch" href="/webpackLearn/assets/js/63.7e09e4d8.js"><link rel="prefetch" href="/webpackLearn/assets/js/64.b3113e47.js"><link rel="prefetch" href="/webpackLearn/assets/js/65.d1030852.js"><link rel="prefetch" href="/webpackLearn/assets/js/66.799e920a.js"><link rel="prefetch" href="/webpackLearn/assets/js/67.a898b698.js"><link rel="prefetch" href="/webpackLearn/assets/js/68.92cd43e9.js"><link rel="prefetch" href="/webpackLearn/assets/js/69.262008ea.js"><link rel="prefetch" href="/webpackLearn/assets/js/7.22611dc1.js"><link rel="prefetch" href="/webpackLearn/assets/js/70.afff8df7.js"><link rel="prefetch" href="/webpackLearn/assets/js/71.7818a2c2.js"><link rel="prefetch" href="/webpackLearn/assets/js/8.5b18428a.js"><link rel="prefetch" href="/webpackLearn/assets/js/9.9ef066a0.js">
    <link rel="stylesheet" href="/webpackLearn/assets/css/styles.77d280ee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpackLearn/" class="home-link router-link-active"><!----><span class="site-name">
      深入浅出Webpack
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/webpackLearn/" class="nav-link">首页</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webpackLearn/" class="nav-link">首页</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>入门</span><!----></p><ul class="sidebar-group-items"><li><a href="/webpackLearn/intro.html" class="sidebar-link">前言</a></li><li><a href="/webpackLearn/intro/intro-1.html" class="sidebar-link">前端的发展</a></li><li><a href="/webpackLearn/intro/intro-2.html" class="sidebar-link">前端常用构建工具</a></li><li><a href="/webpackLearn/intro/intro-3.html" class="sidebar-link">webpack安装使用</a></li><li><a href="/webpackLearn/intro/intro-4.html" class="sidebar-link">使用Loader</a></li><li><a href="/webpackLearn/intro/intro-5.html" class="sidebar-link">使用Plugin</a></li><li><a href="/webpackLearn/intro/intro-6.html" class="sidebar-link">使用DevServer</a></li><li><a href="/webpackLearn/intro/intro-7.html" class="sidebar-link">核心概念</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>配置</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>实战</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>优化</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpackLearn/optimize/optimize-1.html" class="sidebar-link">缩小文件搜索范围</a></li><li><a href="/webpackLearn/optimize/optimize-2.html" class="sidebar-link">使用Dll Plugin</a></li><li><a href="/webpackLearn/optimize/optimize-3.html" class="sidebar-link">使用 HappyPack</a></li><li><a href="/webpackLearn/optimize/optimize-4.html" class="sidebar-link">使用 ParallelUglifyPlugin</a></li><li><a href="/webpackLearn/optimize/optimize-5.html" class="sidebar-link">使用自动刷新</a></li><li><a href="/webpackLearn/optimize/optimize-6.html" class="sidebar-link">开启模块热替换</a></li><li><a href="/webpackLearn/optimize/optimize-7.html" class="sidebar-link">区分环境</a></li><li><a href="/webpackLearn/optimize/optimize-8.html" class="sidebar-link">压缩代码</a></li><li><a href="/webpackLearn/optimize/optimize-9.html" class="sidebar-link">CDN加速</a></li><li><a href="/webpackLearn/optimize/optimize-10.html" class="sidebar-link">使用Tree Shaking</a></li><li><a href="/webpackLearn/optimize/optimize-11.html" class="sidebar-link">提取公共代码</a></li><li><a href="/webpackLearn/optimize/optimize-12.html" class="sidebar-link">按需加载</a></li><li><a href="/webpackLearn/optimize/optimize-13.html" class="sidebar-link">使用PrePack</a></li><li><a href="/webpackLearn/optimize/optimize-14.html" class="sidebar-link">开启Scope Hoisting</a></li><li><a href="/webpackLearn/optimize/optimize-15.html" class="active sidebar-link">输出分析</a></li><li><a href="/webpackLearn/optimize/optimize-16.html" class="sidebar-link">优化总结</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>原理</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="_4-15-输出分析"><a href="#_4-15-输出分析" aria-hidden="true" class="header-anchor">#</a> 4-15 输出分析</h1><p>前面虽然介绍了非常多的优化方法，但这些方法也无法涵盖所有的场景，为此你需要对输出结果做分析，以决定下一步的优化方向。</p><p>最直接的分析方法就是去阅读 Webpack 输出的代码，但由于 <strong>Webpack 输出的代码可读性非常差而且文件非常大</strong>，这会让你非常头疼。 为了更简单直观的分析输出结果，社区中出现了许多可视化的分析工具。这些工具以图形的方式把结果更加直观的展示出来，让你快速看到问题所在。 接下来教你如何使用这些工具。</p><p>在启动 Webpack 时，支持两个参数，分别是：</p><ul><li><code>--profile</code>：记录下构建过程中的耗时信息；</li><li><code>--json</code>：以 JSON 的格式输出构建结果，最后只输出一个 <code>.json</code> 文件，这个文件中包括所有构建相关的信息。</li></ul><p>在启动 Webpack 时带上以上两个参数，启动命令如下 <code>webpack --profile --json &gt; stats.json</code>，你会发现项目中多出了一个 <code>stats.json</code> 文件。 这个 <code>stats.json</code>文件是给后面介绍的可视化分析工具使用的。</p><blockquote><p><code>webpack --profile --json</code> 会输出字符串形式的 <code>JSON，&gt; stats.json</code> 是 UNIX/Linux 系统中的 <strong>管道命令</strong>,含义是把 <code>webpack --profile --json</code> 输出的内容通过管道输出到 <code>stats.json</code> 文件中。</p></blockquote><h2 id="官方的可视化分析工具"><a href="#官方的可视化分析工具" aria-hidden="true" class="header-anchor">#</a> 官方的可视化分析工具</h2><p>Webpack 官方提供了一个可视化分析工具 <code>Webpack Analyse</code>，它是一个在线 Web 应用。</p><p>打开 Webpack Analyse 链接的网页后，你就会看到一个弹窗提示你上传 JSON 文件，也就是需要上传上面讲到的 <code>stats.json</code> 文件，如图：</p><p><img src="/webpackLearn/assets/img/4-15webpack-analyse-dialog.e7d30563.png" alt="图 4-15-1 Webpack Analyse 上传文件弹窗"></p><p>Webpack Analyse 不会把你选择的 <code>stats.json</code> 文件发达到服务器，而是在浏览器本地解析，你不用担心自己的代码为此而泄露。 选择文件后，你马上就能如下的效果图：</p><p><img src="/webpackLearn/assets/img/4-15webpack-analyse-home.1a80dae0.png" alt="图 4-15-1 Webpack Analyse 主页"></p><p>它分为了六大板块，分别是：</p><ul><li><strong>Modules</strong>：展示所有的模块，每个模块对应一个文件。并且还包含所有模块之间的依赖关系图、模块路径、模块 ID、模块所属 Chunk、模块大小；</li><li><strong>Chunks</strong>：展示所有的代码块，一个代码块中包含多个模块。并且还包含代码块的 ID、名称、大小、每个代码块包含的模块数量，以及代码块之间的依赖关系图；</li><li><strong>Assets</strong>：展示所有输出的文件资源，包括 <code>.js</code>、<code>.css</code>、图片等。并且还包括文件名称、大小、该文件来自哪个代码块；</li><li><strong>Warnings</strong>：展示构建过程中出现的所有警告信息；</li><li><strong>Errors</strong>：展示构建过程中出现的所有错误信息；</li><li><strong>Hints</strong>：展示处理每个模块的过程中的耗时。</li></ul><p>下面以在<a href="/webpackLearn/practice/practice-10.html">管理多个单页应用</a> 中使用的项目为例，来分析其 <code>stats.json</code>文件。</p><p>点击 <strong>Modules</strong>，查看模块信息，效果图如下：</p><p><img src="/webpackLearn/assets/img/4-15webpack-analyse-modules.7be9f768.png" alt="图 4-15-1 Webpack Analyse Modules"></p><p>由于依赖了大量第三方模块，文件数量大，导致模块之间的依赖关系图太密集而无法看清，但你可以进一步放大查看。</p><p>点击 <strong>Chunks</strong>，查看代码块信息，效果图如下：</p><p><img src="/webpackLearn/assets/img/4-15webpack-analyse-chunks.f366d9f8.png" alt="图 4-15-2 Webpack Analyse Chunks"></p><p>由代码块之间的依赖关系图可以看出两个页面级的代码块 <code>login</code> 和 <code>index</code> 依赖提取出来的公共代码块 <code>common</code>。</p><p>点击 <strong>Assets</strong>，查看输出的文件资源，效果图如下：</p><p><img src="/webpackLearn/assets/img/4-15webpack-analyse-assets.0737993b.png" alt="图 4-15-3 Webpack Analyse Assets"></p><p>点击 <strong>Hints</strong>，查看输出过程中的耗时分布，效果图如下：</p><p><img src="/webpackLearn/assets/img/4-15webpack-analyse-hints.d416883f.png" alt="图 4-15-3 Webpack Analyse Hints"></p><blockquote><p>从 Hints 可以看出每个文件在处理过程的开始时间和结束时间，从而可以找出是哪个文件导致构建缓慢。</p></blockquote><h2 id="webpack-bundle-analyzer"><a href="#webpack-bundle-analyzer" aria-hidden="true" class="header-anchor">#</a> webpack-bundle-analyzer</h2><p><code>webpack-bundle-analyzer</code> 是另一个可视化分析工具， 它虽然没有官方那样有那么多功能，但比官方的要更加直观。</p><p>先来看下它的效果图：</p><p><img src="/webpackLearn/assets/img/4-15webpack-bundle-analyzer.5c51148c.png" alt="图 4-15-4 Webpack Analyse Assets"></p><p>它能方便的让你知道：</p><ul><li>打包出的文件中都包含了什么；</li><li>每个文件的尺寸在总体中的占比，一眼看出哪些文件尺寸大；</li><li>模块之间的包含关系；</li><li>每个文件的 Gzip 后的大小。</li></ul><p>接入 webpack-bundle-analyzer 的方法很简单，步骤如下：</p><p>安装 <code>webpack-bundle-analyzer</code> 到全局，执行命令 <code>npm i -g webpack-bundle-analyzer</code>；</p><ol><li>按照上面提到的方法生成 <code>stats.json</code> 文件；</li><li>在项目根目录中执行 <code>webpack-bundle-analyzer</code> 后，浏览器会打开对应网页看到以上效果。</li></ol></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpackLearn/optimize/optimize-14.html" class="prev">
          开启Scope Hoisting
        </a></span><span class="next"><a href="/webpackLearn/optimize/optimize-16.html">
          优化总结
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpackLearn/assets/js/app.77d280ee.js" defer></script><script src="/webpackLearn/assets/js/1.f37f7214.js" defer></script>
  </body>
</html>
