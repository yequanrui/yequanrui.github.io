<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2-2 Output | 深入浅出Webpack</title>
    <meta name="description" content="webpack使用学习(吴浩麟版)">
    <link rel="icon" href="/webpackLearn/favicon.ico">
  <link rel="manifest" href="/webpackLearn/manifest.json">
    
    <link rel="preload" href="/webpackLearn/assets/css/styles.77d280ee.css" as="style"><link rel="preload" href="/webpackLearn/assets/js/app.77d280ee.js" as="script"><link rel="preload" href="/webpackLearn/assets/js/61.9fab59f3.js" as="script"><link rel="prefetch" href="/webpackLearn/assets/js/1.f37f7214.js"><link rel="prefetch" href="/webpackLearn/assets/js/10.15a163ee.js"><link rel="prefetch" href="/webpackLearn/assets/js/11.d8cde28c.js"><link rel="prefetch" href="/webpackLearn/assets/js/12.6e485d95.js"><link rel="prefetch" href="/webpackLearn/assets/js/13.8167464c.js"><link rel="prefetch" href="/webpackLearn/assets/js/14.7e75c412.js"><link rel="prefetch" href="/webpackLearn/assets/js/15.593f55f2.js"><link rel="prefetch" href="/webpackLearn/assets/js/16.31248cfb.js"><link rel="prefetch" href="/webpackLearn/assets/js/17.c428f9be.js"><link rel="prefetch" href="/webpackLearn/assets/js/18.1a442e25.js"><link rel="prefetch" href="/webpackLearn/assets/js/19.d2aaef13.js"><link rel="prefetch" href="/webpackLearn/assets/js/2.d7cdf3d2.js"><link rel="prefetch" href="/webpackLearn/assets/js/20.d7645fb0.js"><link rel="prefetch" href="/webpackLearn/assets/js/21.d80e0286.js"><link rel="prefetch" href="/webpackLearn/assets/js/22.b41f3cbc.js"><link rel="prefetch" href="/webpackLearn/assets/js/23.f8779f82.js"><link rel="prefetch" href="/webpackLearn/assets/js/24.958d3c85.js"><link rel="prefetch" href="/webpackLearn/assets/js/25.2e076f51.js"><link rel="prefetch" href="/webpackLearn/assets/js/26.eff2c3e5.js"><link rel="prefetch" href="/webpackLearn/assets/js/27.40064e0e.js"><link rel="prefetch" href="/webpackLearn/assets/js/28.9ad06b95.js"><link rel="prefetch" href="/webpackLearn/assets/js/29.3a0865a0.js"><link rel="prefetch" href="/webpackLearn/assets/js/3.128b6292.js"><link rel="prefetch" href="/webpackLearn/assets/js/30.25c4f77e.js"><link rel="prefetch" href="/webpackLearn/assets/js/31.80207808.js"><link rel="prefetch" href="/webpackLearn/assets/js/32.20b8aa68.js"><link rel="prefetch" href="/webpackLearn/assets/js/33.414db07e.js"><link rel="prefetch" href="/webpackLearn/assets/js/34.3c015b40.js"><link rel="prefetch" href="/webpackLearn/assets/js/35.cfff3ee7.js"><link rel="prefetch" href="/webpackLearn/assets/js/36.5693324e.js"><link rel="prefetch" href="/webpackLearn/assets/js/37.11302d4c.js"><link rel="prefetch" href="/webpackLearn/assets/js/38.5f09cd6d.js"><link rel="prefetch" href="/webpackLearn/assets/js/39.b8a318d2.js"><link rel="prefetch" href="/webpackLearn/assets/js/4.7fbde3f9.js"><link rel="prefetch" href="/webpackLearn/assets/js/40.010eca0d.js"><link rel="prefetch" href="/webpackLearn/assets/js/41.ed550296.js"><link rel="prefetch" href="/webpackLearn/assets/js/42.bf111eba.js"><link rel="prefetch" href="/webpackLearn/assets/js/43.4178a489.js"><link rel="prefetch" href="/webpackLearn/assets/js/44.f9b7d3d8.js"><link rel="prefetch" href="/webpackLearn/assets/js/45.4aa3e07a.js"><link rel="prefetch" href="/webpackLearn/assets/js/46.766fddaf.js"><link rel="prefetch" href="/webpackLearn/assets/js/47.7a16de60.js"><link rel="prefetch" href="/webpackLearn/assets/js/48.ec0b2eb5.js"><link rel="prefetch" href="/webpackLearn/assets/js/49.9ba3c919.js"><link rel="prefetch" href="/webpackLearn/assets/js/5.7aab97c6.js"><link rel="prefetch" href="/webpackLearn/assets/js/50.fe7bdfef.js"><link rel="prefetch" href="/webpackLearn/assets/js/51.b5d4459d.js"><link rel="prefetch" href="/webpackLearn/assets/js/52.aa5814ff.js"><link rel="prefetch" href="/webpackLearn/assets/js/53.8ad00778.js"><link rel="prefetch" href="/webpackLearn/assets/js/54.92f9cbd1.js"><link rel="prefetch" href="/webpackLearn/assets/js/55.d04ea61a.js"><link rel="prefetch" href="/webpackLearn/assets/js/56.4b17dc92.js"><link rel="prefetch" href="/webpackLearn/assets/js/57.82800a68.js"><link rel="prefetch" href="/webpackLearn/assets/js/58.b4482327.js"><link rel="prefetch" href="/webpackLearn/assets/js/59.40bf3560.js"><link rel="prefetch" href="/webpackLearn/assets/js/6.e891bd55.js"><link rel="prefetch" href="/webpackLearn/assets/js/60.3a147a38.js"><link rel="prefetch" href="/webpackLearn/assets/js/62.7aacd083.js"><link rel="prefetch" href="/webpackLearn/assets/js/63.7e09e4d8.js"><link rel="prefetch" href="/webpackLearn/assets/js/64.b3113e47.js"><link rel="prefetch" href="/webpackLearn/assets/js/65.d1030852.js"><link rel="prefetch" href="/webpackLearn/assets/js/66.799e920a.js"><link rel="prefetch" href="/webpackLearn/assets/js/67.a898b698.js"><link rel="prefetch" href="/webpackLearn/assets/js/68.92cd43e9.js"><link rel="prefetch" href="/webpackLearn/assets/js/69.262008ea.js"><link rel="prefetch" href="/webpackLearn/assets/js/7.22611dc1.js"><link rel="prefetch" href="/webpackLearn/assets/js/70.afff8df7.js"><link rel="prefetch" href="/webpackLearn/assets/js/71.7818a2c2.js"><link rel="prefetch" href="/webpackLearn/assets/js/8.5b18428a.js"><link rel="prefetch" href="/webpackLearn/assets/js/9.9ef066a0.js">
    <link rel="stylesheet" href="/webpackLearn/assets/css/styles.77d280ee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpackLearn/" class="home-link router-link-active"><!----><span class="site-name">
      深入浅出Webpack
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/webpackLearn/" class="nav-link">首页</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/webpackLearn/" class="nav-link">首页</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>入门</span><!----></p><ul class="sidebar-group-items"><li><a href="/webpackLearn/intro.html" class="sidebar-link">前言</a></li><li><a href="/webpackLearn/intro/intro-1.html" class="sidebar-link">前端的发展</a></li><li><a href="/webpackLearn/intro/intro-2.html" class="sidebar-link">前端常用构建工具</a></li><li><a href="/webpackLearn/intro/intro-3.html" class="sidebar-link">webpack安装使用</a></li><li><a href="/webpackLearn/intro/intro-4.html" class="sidebar-link">使用Loader</a></li><li><a href="/webpackLearn/intro/intro-5.html" class="sidebar-link">使用Plugin</a></li><li><a href="/webpackLearn/intro/intro-6.html" class="sidebar-link">使用DevServer</a></li><li><a href="/webpackLearn/intro/intro-7.html" class="sidebar-link">核心概念</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>配置</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpackLearn/setting/setting-1.html" class="sidebar-link">Entry</a></li><li><a href="/webpackLearn/setting/setting-2.html" class="active sidebar-link">Output</a></li><li><a href="/webpackLearn/setting/setting-3.html" class="sidebar-link">Module</a></li><li><a href="/webpackLearn/setting/setting-4.html" class="sidebar-link">Resolve</a></li><li><a href="/webpackLearn/setting/setting-5.html" class="sidebar-link">Plugins</a></li><li><a href="/webpackLearn/setting/setting-6.html" class="sidebar-link">DevServer</a></li><li><a href="/webpackLearn/setting/setting-7.html" class="sidebar-link">其他配置项</a></li><li><a href="/webpackLearn/setting/setting-8.html" class="sidebar-link">整体配置结构</a></li><li><a href="/webpackLearn/setting/setting-9.html" class="sidebar-link">多种配置类型</a></li><li><a href="/webpackLearn/setting/setting-10.html" class="sidebar-link">配置总结</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>实战</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>优化</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>原理</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="_2-2-output"><a href="#_2-2-output" aria-hidden="true" class="header-anchor">#</a> 2-2 Output</h1><p><code>output</code> 配置如何输出最终想要的代码。<code>output</code> 是一个 <code>object</code>，里面包含一系列配置项，下面分别介绍它们。</p><h2 id="filename"><a href="#filename" aria-hidden="true" class="header-anchor">#</a> filename</h2><p><code>output.filename</code>配置输出文件的名称，为 <code>string</code> 类型。 如果只有一个输出文件，则可以把它写成静态不变的：</p><div class="language- extra-class"><pre class="language-text"><code>filename: 'bundle.js'
</code></pre></div><p>但是在有多个 Chunk 要输出时，就需要借助模版和变量了。前面说到 Webpack 会为每个 Chunk 取一个名称，可以根据 Chunk 的名称来区分输出的文件名：</p><div class="language- extra-class"><pre class="language-text"><code>filename: '[name].js'
</code></pre></div><p>代码里的 <code>[name]</code> 代表用内置的 <code>name</code> 变量去替换<code>[name]</code>，这时你可以把它看作一个字符串模块函数， 每个要输出的 Chunk 都会通过这个函数去拼接出输出的文件名称。</p><p>内置变量除了 <code>name</code> 还包括：</p><table><thead><tr><th>变量名</th><th>含义</th></tr></thead><tbody><tr><td><strong>id</strong></td><td>Chunk 的唯一标识，从 0 开始</td></tr><tr><td><strong>name</strong></td><td>Chunk 的名称</td></tr><tr><td><strong>hash</strong></td><td>Chunk 的唯一标识的 Hash 值</td></tr><tr><td><strong>chunkhash</strong></td><td>Chunk 内容的 Hash 值</td></tr></tbody></table><p>其中 <code>hash</code> 和 <code>chunkhash</code> 的长度是可指定的，<code>[hash:8]</code> 代表取 8 位 Hash 值，默认是 20 位。</p><blockquote><p>注意 <code>ExtractTextWebpackPlugin</code> 插件是使用 <code>contenthash</code> 来代表哈希值而不是 <code>chunkhash</code>， 原因在于 <code>ExtractTextWebpackPlugin</code> 提取出来的内容是 <strong>代码内容本身</strong>而不是由一组模块组成的 <code>Chunk</code>。</p></blockquote><h3 id="webpack-中的-hash、chunkhash、contenthash-区别"><a href="#webpack-中的-hash、chunkhash、contenthash-区别" aria-hidden="true" class="header-anchor">#</a> webpack 中的 hash、chunkhash、contenthash 区别</h3><p>哈希一般是结合 CDN 缓存来使用，通过 webpack 构建之后，生成对应文件名自动带上对应的 MD5 值。如果文件内容改变的话，那么对应文件哈希值也会改变，对应的 HTML 引用的 URL 地址也会改变，触发 CDN 服务器从源服务器上拉取对应数据，进而更新本地缓存。但是在实际使用的时候，这几种哈希计算还是有一定区别。</p><h4 id="hash"><a href="#hash" aria-hidden="true" class="header-anchor">#</a> hash</h4><p>hash 是跟整个项目的构建相关，只要 <strong>项目里有文件更改</strong>，整个项目构建的 hash 值都会更改，并且全部文件都共用相同的 hash 值</p><h4 id="chunkhash"><a href="#chunkhash" aria-hidden="true" class="header-anchor">#</a> chunkhash</h4><p>采用 hash 计算的话，每一次构建后生成的哈希值都不一样，即使文件内容压根没有改变。这样子是没办法实现缓存效果，我们需要换另一种哈希值计算方式，即 <code>chunkhash</code>。</p><p>chunkhash 和 hash 不一样，它根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值。我们在生产环境里把一些公共库和程序入口文件区分开，单独打包构建，接着我们采用 chunkhash 的方式生成哈希值，那么只要我们不改动公共库的代码，就可以保证其哈希值不会受影响。</p><h4 id="contenthash"><a href="#contenthash" aria-hidden="true" class="header-anchor">#</a> contenthash</h4><p>在 chunkhash 的例子，我们可以看到由于<code>index.css</code>被<code>index.js</code>引用了，所以共用相同的<code>chunkhash</code>值。但是这样子有个问题，如果<code>index.js</code>更改了代码，css 文件就算内容没有任何改变，由于是该模块发生了改变，导致 css 文件会重复构建。
这个时候，我们可以使用<code>extra-text-webpack-plugin</code>里的<code>contenthash</code>值，保证即使 css 文件所处的模块里就算其他文件内容改变，只要 <strong>css 文件内容不变</strong>，那么不会重复构建</p><h2 id="chunkfilename"><a href="#chunkfilename" aria-hidden="true" class="header-anchor">#</a> chunkFilename</h2><p><code>output.chunkFilename</code> 配置无入口的 Chunk 在输出时的文件名称。chunkFilename 和上面的 filename 非常类似，但 chunkFilename 只用于指定在运行过程中生成的 Chunk 在输出时的文件名称。 常见的会在运行时生成 Chunk 场景有在使用 <strong>CommonChunkPlugin</strong>、<strong>使用 import('path/to/module') 动态加载</strong>等时。 chunkFilename 支持和 filename 一致的内置变量。</p><h2 id="path"><a href="#path" aria-hidden="true" class="header-anchor">#</a> path</h2><p><code>output.path</code> 配置输出文件存放在本地的目录，必须是 string 类型的绝对路径。通常通过 Node.js 的 path 模块去获取绝对路径：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist_[hash]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="publicpath"><a href="#publicpath" aria-hidden="true" class="header-anchor">#</a> publicPath</h2><p>在复杂的项目里可能会有一些构建出的资源需要异步加载，加载这些异步资源需要对应的 URL 地址。</p><p><code>output.publicPath</code> 配置发布到线上资源的 URL 前缀，为 string 类型。 默认值是空字符串 ''，即使用相对路径。</p><p>这样说可能有点抽象，举个例子，需要把构建出的资源文件上传到 CDN 服务上，以利于加快页面的打开速度。配置代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>filename<span class="token punctuation">:</span> <span class="token string">&quot;[name]_[chunkhash:8].js&quot;</span><span class="token punctuation">;</span>
publicPath<span class="token punctuation">:</span> <span class="token string">&quot;https://cdn.example.com/assets/&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>这时发布到线上的 HTML 在引入 JavaScript 文件时就需要：</p><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://cdn.example.com/assets/a_12345678.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>使用该配置项时要小心，稍有不慎将导致资源加载 404 错误。</p><p><code>output.path</code> 和 <code>output.publicPath</code> 都支持字符串模版，内置变量只有一个：<strong>hash 代表一次编译操作的 Hash 值</strong>。</p><h2 id="crossoriginloading"><a href="#crossoriginloading" aria-hidden="true" class="header-anchor">#</a> crossOriginLoading</h2><p>Webpack 输出的部分代码块可能需要异步加载，而异步加载是通过 <code>JSONP</code> 方式实现的。 <code>JSONP</code> 的原理是动态地向 HTML 中插入一个 <code>&lt;script src=&quot;url&quot;&gt;&lt;/script&gt;</code>标签去加载异步资源。 <code>output.crossOriginLoading</code> 则是用于配置这个异步插入的标签的 crossorigin 值。</p><p>script 标签的 <code>crossorigin</code> 属性可以取以下值：</p><ul><li><code>anonymous(默认)</code> 在加载此脚本资源时不会带上用户的 Cookies；</li><li><code>use-credentials</code> 在加载此脚本资源时会带上用户的 Cookies。</li></ul><p>通常用设置 <code>crossorigin</code> 来获取异步加载的脚本执行时的详细错误信息。</p><h2 id="librarytarget-和-library"><a href="#librarytarget-和-library" aria-hidden="true" class="header-anchor">#</a> libraryTarget 和 library</h2><p>当用 Webpack 去构建一个可以被其他模块导入使用的库时需要用到它们。</p><ul><li><code>output.libraryTarget</code> 配置以何种方式导出库。</li><li><code>output.library</code> 配置导出库的名称。</li></ul><p>它们通常搭配在一起使用。</p><p><code>output.libraryTarget</code> 是字符串的枚举类型，支持以下配置。</p><h3 id="var-默认"><a href="#var-默认" aria-hidden="true" class="header-anchor">#</a> var (默认)</h3><p>编写的库将通过 <code>var</code> 被赋值给通过 <code>library</code> 指定名称的变量。</p><p>假如配置了 <code>output.library='LibraryName'</code>，则输出和使用的代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
<span class="token keyword">var</span> LibraryName <span class="token operator">=</span> lib_code<span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
LibraryName<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>假如 <code>output.library</code> 为空，则将直接输出：</p><div class="language-js extra-class"><pre class="language-js"><code>lib_code<span class="token punctuation">;</span>
</code></pre></div><p>其中 <code>lib_code</code> 代指导出库的代码内容，是有 <strong>返回值的一个自执行函数</strong>。</p><h3 id="commonjs"><a href="#commonjs" aria-hidden="true" class="header-anchor">#</a> commonjs</h3><p>编写的库将通过 CommonJS 规范导出。</p><p>假如配置了 <code>output.library='LibraryName'</code>，则输出和使用的代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
exports<span class="token punctuation">[</span><span class="token string">&quot;LibraryName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> lib_code<span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;library-name-in-npm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;LibraryName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其中 <code>library-name-in-npm</code>是指模块发布到 <code>Npm</code>代码仓库时的名称。</p><h3 id="commonjs2"><a href="#commonjs2" aria-hidden="true" class="header-anchor">#</a> commonjs2</h3><p>编写的库将通过 CommonJS2 规范导出，输出和使用的代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> lib_code<span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;library-name-in-npm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>CommonJS2 和 CommonJS 规范很相似，差别在于 CommonJS 只能用 <code>exports</code> 导出，而 CommonJS2 在 CommonJS 的基础上增加了 <code>module.exports</code> 的导出方式。
在 <code>output.libraryTarget</code> 为 commonjs2 时，配置 output.library 将没有意义。</p></blockquote><h3 id="this"><a href="#this" aria-hidden="true" class="header-anchor">#</a> this</h3><p>编写的库将通过 <code>this</code> 被赋值给通过 <code>library</code> 指定的名称，输出和使用的代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">&quot;LibraryName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> lib_code<span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>LibraryName<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="window"><a href="#window" aria-hidden="true" class="header-anchor">#</a> window</h3><p>编写的库将通过 <code>window</code>被赋值给通过 <code>library</code> 指定的名称，即把库挂载到 <code>window</code> 上，输出和使用的代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
window<span class="token punctuation">[</span><span class="token string">&quot;LibraryName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> lib_code<span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
window<span class="token punctuation">.</span>LibraryName<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="global"><a href="#global" aria-hidden="true" class="header-anchor">#</a> global</h3><p>编写的库将通过 <code>global</code> 被赋值给通过 <code>library</code> 指定的名称，即把库挂载到 <code>global</code> 上，输出和使用的代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
global<span class="token punctuation">[</span><span class="token string">&quot;LibraryName&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> lib_code<span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
global<span class="token punctuation">.</span>LibraryName<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="libraryexport"><a href="#libraryexport" aria-hidden="true" class="header-anchor">#</a> libraryExport</h3><p><code>output.libraryExport</code> 配置要导出的模块中哪些子模块需要被导出。 它只有在 <code>output.libraryTarget</code> 被设置成 <code>commonjs</code> 或者 <code>commonjs2</code> 时使用才有意义。</p><p>假如要导出的模块源代码是：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在你想让构建输出的代码只导出其中的 <code>a</code>，可以把 <code>output.libraryExport</code> 设置成 a，那么构建输出的代码和使用方法将变成如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Webpack 输出的代码</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> lib_code<span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 使用库的方法</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;library-name-in-npm&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>以上只是 <code>output</code> 里常用的配置项，还有部分几乎用不上的配置项没有一一列举，你可以在 <a href="https://webpack.js.org/configuration/output/" target="_blank" rel="noopener noreferrer">Webpack 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>上查阅它们。</p></blockquote></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpackLearn/setting/setting-1.html" class="prev">
          Entry
        </a></span><span class="next"><a href="/webpackLearn/setting/setting-3.html">
          Module
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpackLearn/assets/js/app.77d280ee.js" defer></script><script src="/webpackLearn/assets/js/61.9fab59f3.js" defer></script>
  </body>
</html>
