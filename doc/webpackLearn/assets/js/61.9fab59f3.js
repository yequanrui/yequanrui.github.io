(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{67:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),a("p",[t._v("但是在有多个 Chunk 要输出时，就需要借助模版和变量了。前面说到 Webpack 会为每个 Chunk 取一个名称，可以根据 Chunk 的名称来区分输出的文件名：")]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),a("p",[t._v("哈希一般是结合 CDN 缓存来使用，通过 webpack 构建之后，生成对应文件名自动带上对应的 MD5 值。如果文件内容改变的话，那么对应文件哈希值也会改变，对应的 HTML 引用的 URL 地址也会改变，触发 CDN 服务器从源服务器上拉取对应数据，进而更新本地缓存。但是在实际使用的时候，这几种哈希计算还是有一定区别。")]),t._m(12),t._m(13),t._m(14),t._m(15),a("p",[t._v("chunkhash 和 hash 不一样，它根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值。我们在生产环境里把一些公共库和程序入口文件区分开，单独打包构建，接着我们采用 chunkhash 的方式生成哈希值，那么只要我们不改动公共库的代码，就可以保证其哈希值不会受影响。")]),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),a("p",[t._v("在复杂的项目里可能会有一些构建出的资源需要异步加载，加载这些异步资源需要对应的 URL 地址。")]),t._m(24),a("p",[t._v("这样说可能有点抽象，举个例子，需要把构建出的资源文件上传到 CDN 服务上，以利于加快页面的打开速度。配置代码如下：")]),t._m(25),a("p",[t._v("这时发布到线上的 HTML 在引入 JavaScript 文件时就需要：")]),t._m(26),a("p",[t._v("使用该配置项时要小心，稍有不慎将导致资源加载 404 错误。")]),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),t._m(33),a("p",[t._v("当用 Webpack 去构建一个可以被其他模块导入使用的库时需要用到它们。")]),t._m(34),a("p",[t._v("它们通常搭配在一起使用。")]),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),t._m(41),t._m(42),t._m(43),a("p",[t._v("编写的库将通过 CommonJS 规范导出。")]),t._m(44),t._m(45),t._m(46),t._m(47),a("p",[t._v("编写的库将通过 CommonJS2 规范导出，输出和使用的代码如下：")]),t._m(48),t._m(49),t._m(50),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),a("p",[t._v("假如要导出的模块源代码是：")]),t._m(61),t._m(62),t._m(63),a("blockquote",[a("p",[t._v("以上只是 "),a("code",[t._v("output")]),t._v(" 里常用的配置项，还有部分几乎用不上的配置项没有一一列举，你可以在 "),a("a",{attrs:{href:"https://webpack.js.org/configuration/output/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 官方文档"),a("OutboundLink")],1),t._v("上查阅它们。")])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"_2-2-output"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-output","aria-hidden":"true"}},[this._v("#")]),this._v(" 2-2 Output")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output")]),this._v(" 配置如何输出最终想要的代码。"),s("code",[this._v("output")]),this._v(" 是一个 "),s("code",[this._v("object")]),this._v("，里面包含一系列配置项，下面分别介绍它们。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"filename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filename","aria-hidden":"true"}},[this._v("#")]),this._v(" filename")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output.filename")]),this._v("配置输出文件的名称，为 "),s("code",[this._v("string")]),this._v(" 类型。 如果只有一个输出文件，则可以把它写成静态不变的：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("filename: 'bundle.js'\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("filename: '[name].js'\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("代码里的 "),s("code",[this._v("[name]")]),this._v(" 代表用内置的 "),s("code",[this._v("name")]),this._v(" 变量去替换"),s("code",[this._v("[name]")]),this._v("，这时你可以把它看作一个字符串模块函数， 每个要输出的 Chunk 都会通过这个函数去拼接出输出的文件名称。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("内置变量除了 "),s("code",[this._v("name")]),this._v(" 还包括：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("变量名")]),a("th",[t._v("含义")])])]),a("tbody",[a("tr",[a("td",[a("strong",[t._v("id")])]),a("td",[t._v("Chunk 的唯一标识，从 0 开始")])]),a("tr",[a("td",[a("strong",[t._v("name")])]),a("td",[t._v("Chunk 的名称")])]),a("tr",[a("td",[a("strong",[t._v("hash")])]),a("td",[t._v("Chunk 的唯一标识的 Hash 值")])]),a("tr",[a("td",[a("strong",[t._v("chunkhash")])]),a("td",[t._v("Chunk 内容的 Hash 值")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其中 "),s("code",[this._v("hash")]),this._v(" 和 "),s("code",[this._v("chunkhash")]),this._v(" 的长度是可指定的，"),s("code",[this._v("[hash:8]")]),this._v(" 代表取 8 位 Hash 值，默认是 20 位。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[t._v("注意 "),a("code",[t._v("ExtractTextWebpackPlugin")]),t._v(" 插件是使用 "),a("code",[t._v("contenthash")]),t._v(" 来代表哈希值而不是 "),a("code",[t._v("chunkhash")]),t._v("， 原因在于 "),a("code",[t._v("ExtractTextWebpackPlugin")]),t._v(" 提取出来的内容是 "),a("strong",[t._v("代码内容本身")]),t._v("而不是由一组模块组成的 "),a("code",[t._v("Chunk")]),t._v("。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"webpack-中的-hash、chunkhash、contenthash-区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-中的-hash、chunkhash、contenthash-区别","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack 中的 hash、chunkhash、contenthash 区别")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"hash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hash","aria-hidden":"true"}},[this._v("#")]),this._v(" hash")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("hash 是跟整个项目的构建相关，只要 "),s("strong",[this._v("项目里有文件更改")]),this._v("，整个项目构建的 hash 值都会更改，并且全部文件都共用相同的 hash 值")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"chunkhash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chunkhash","aria-hidden":"true"}},[this._v("#")]),this._v(" chunkhash")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("采用 hash 计算的话，每一次构建后生成的哈希值都不一样，即使文件内容压根没有改变。这样子是没办法实现缓存效果，我们需要换另一种哈希值计算方式，即 "),s("code",[this._v("chunkhash")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"contenthash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contenthash","aria-hidden":"true"}},[this._v("#")]),this._v(" contenthash")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("在 chunkhash 的例子，我们可以看到由于"),a("code",[t._v("index.css")]),t._v("被"),a("code",[t._v("index.js")]),t._v("引用了，所以共用相同的"),a("code",[t._v("chunkhash")]),t._v("值。但是这样子有个问题，如果"),a("code",[t._v("index.js")]),t._v("更改了代码，css 文件就算内容没有任何改变，由于是该模块发生了改变，导致 css 文件会重复构建。\n这个时候，我们可以使用"),a("code",[t._v("extra-text-webpack-plugin")]),t._v("里的"),a("code",[t._v("contenthash")]),t._v("值，保证即使 css 文件所处的模块里就算其他文件内容改变，只要 "),a("strong",[t._v("css 文件内容不变")]),t._v("，那么不会重复构建")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"chunkfilename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chunkfilename","aria-hidden":"true"}},[this._v("#")]),this._v(" chunkFilename")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output.chunkFilename")]),this._v(" 配置无入口的 Chunk 在输出时的文件名称。chunkFilename 和上面的 filename 非常类似，但 chunkFilename 只用于指定在运行过程中生成的 Chunk 在输出时的文件名称。 常见的会在运行时生成 Chunk 场景有在使用 "),s("strong",[this._v("CommonChunkPlugin")]),this._v("、"),s("strong",[this._v("使用 import('path/to/module') 动态加载")]),this._v("等时。 chunkFilename 支持和 filename 一致的内置变量。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#path","aria-hidden":"true"}},[this._v("#")]),this._v(" path")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output.path")]),this._v(" 配置输出文件存放在本地的目录，必须是 string 类型的绝对路径。通常通过 Node.js 的 path 模块去获取绝对路径：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist_[hash]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"publicpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#publicpath","aria-hidden":"true"}},[this._v("#")]),this._v(" publicPath")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output.publicPath")]),this._v(" 配置发布到线上资源的 URL 前缀，为 string 类型。 默认值是空字符串 ''，即使用相对路径。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[name]_[chunkhash:8].js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npublicPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.example.com/assets/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://cdn.example.com/assets/a_12345678.js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}}),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output.path")]),this._v(" 和 "),s("code",[this._v("output.publicPath")]),this._v(" 都支持字符串模版，内置变量只有一个："),s("strong",[this._v("hash 代表一次编译操作的 Hash 值")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"crossoriginloading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crossoriginloading","aria-hidden":"true"}},[this._v("#")]),this._v(" crossOriginLoading")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("Webpack 输出的部分代码块可能需要异步加载，而异步加载是通过 "),a("code",[t._v("JSONP")]),t._v(" 方式实现的。 "),a("code",[t._v("JSONP")]),t._v(" 的原理是动态地向 HTML 中插入一个 "),a("code",[t._v('<script src="url"><\/script>')]),t._v("标签去加载异步资源。 "),a("code",[t._v("output.crossOriginLoading")]),t._v(" 则是用于配置这个异步插入的标签的 crossorigin 值。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("script 标签的 "),s("code",[this._v("crossorigin")]),this._v(" 属性可以取以下值：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("anonymous(默认)")]),this._v(" 在加载此脚本资源时不会带上用户的 Cookies；")]),s("li",[s("code",[this._v("use-credentials")]),this._v(" 在加载此脚本资源时会带上用户的 Cookies。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("通常用设置 "),s("code",[this._v("crossorigin")]),this._v(" 来获取异步加载的脚本执行时的详细错误信息。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"librarytarget-和-library"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#librarytarget-和-library","aria-hidden":"true"}},[this._v("#")]),this._v(" libraryTarget 和 library")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("output.libraryTarget")]),this._v(" 配置以何种方式导出库。")]),s("li",[s("code",[this._v("output.library")]),this._v(" 配置导出库的名称。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("output.libraryTarget")]),this._v(" 是字符串的枚举类型，支持以下配置。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"var-默认"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#var-默认","aria-hidden":"true"}},[this._v("#")]),this._v(" var (默认)")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("编写的库将通过 "),s("code",[this._v("var")]),this._v(" 被赋值给通过 "),s("code",[this._v("library")]),this._v(" 指定名称的变量。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("假如配置了 "),s("code",[this._v("output.library='LibraryName'")]),this._v("，则输出和使用的代码如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" LibraryName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\nLibraryName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("假如 "),s("code",[this._v("output.library")]),this._v(" 为空，则将直接输出：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[this._v("lib_code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其中 "),s("code",[this._v("lib_code")]),this._v(" 代指导出库的代码内容，是有 "),s("strong",[this._v("返回值的一个自执行函数")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"commonjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commonjs","aria-hidden":"true"}},[this._v("#")]),this._v(" commonjs")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("假如配置了 "),s("code",[this._v("output.library='LibraryName'")]),this._v("，则输出和使用的代码如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LibraryName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"library-name-in-npm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LibraryName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("其中 "),s("code",[this._v("library-name-in-npm")]),this._v("是指模块发布到 "),s("code",[this._v("Npm")]),this._v("代码仓库时的名称。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"commonjs2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commonjs2","aria-hidden":"true"}},[this._v("#")]),this._v(" commonjs2")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"library-name-in-npm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("CommonJS2 和 CommonJS 规范很相似，差别在于 CommonJS 只能用 "),s("code",[this._v("exports")]),this._v(" 导出，而 CommonJS2 在 CommonJS 的基础上增加了 "),s("code",[this._v("module.exports")]),this._v(" 的导出方式。\n在 "),s("code",[this._v("output.libraryTarget")]),this._v(" 为 commonjs2 时，配置 output.library 将没有意义。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"this"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this","aria-hidden":"true"}},[this._v("#")]),this._v(" this")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("编写的库将通过 "),s("code",[this._v("this")]),this._v(" 被赋值给通过 "),s("code",[this._v("library")]),this._v(" 指定的名称，输出和使用的代码如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LibraryName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LibraryName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"window"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#window","aria-hidden":"true"}},[this._v("#")]),this._v(" window")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("编写的库将通过 "),s("code",[this._v("window")]),this._v("被赋值给通过 "),s("code",[this._v("library")]),this._v(" 指定的名称，即把库挂载到 "),s("code",[this._v("window")]),this._v(" 上，输出和使用的代码如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LibraryName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LibraryName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"global"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#global","aria-hidden":"true"}},[this._v("#")]),this._v(" global")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("编写的库将通过 "),s("code",[this._v("global")]),this._v(" 被赋值给通过 "),s("code",[this._v("library")]),this._v(" 指定的名称，即把库挂载到 "),s("code",[this._v("global")]),this._v(" 上，输出和使用的代码如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\nglobal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LibraryName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\nglobal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LibraryName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"libraryexport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#libraryexport","aria-hidden":"true"}},[this._v("#")]),this._v(" libraryExport")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("output.libraryExport")]),t._v(" 配置要导出的模块中哪些子模块需要被导出。 它只有在 "),a("code",[t._v("output.libraryTarget")]),t._v(" 被设置成 "),a("code",[t._v("commonjs")]),t._v(" 或者 "),a("code",[t._v("commonjs2")]),t._v(" 时使用才有意义。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("现在你想让构建输出的代码只导出其中的 "),s("code",[this._v("a")]),this._v("，可以把 "),s("code",[this._v("output.libraryExport")]),this._v(" 设置成 a，那么构建输出的代码和使用方法将变成如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Webpack 输出的代码")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" lib_code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用库的方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"library-name-in-npm"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])}],!1,null,null,null);s.default=n.exports}}]);